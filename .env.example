# The Nexus Engine - Environment Configuration
# Copy this file to .env and customize as needed

# ===========================================
# Service Ports
# ===========================================
PBS_PORT=8000
IDR_PORT=5050
REDIS_PORT=6379
TIMESCALE_PORT=5432

# ===========================================
# IDR Settings
# ===========================================
# Enable/disable IDR partner selection
IDR_ENABLED=true

# Timeout for IDR service calls (ms)
IDR_TIMEOUT_MS=50

# ===========================================
# Event Recording
# ===========================================
# Record auction events for learning
EVENT_RECORD_ENABLED=true

# Buffer size before flushing events
EVENT_BUFFER_SIZE=100

# ===========================================
# Database Credentials
# ===========================================
# TimescaleDB password (change in production!)
POSTGRES_PASSWORD=nexusengine

# Use mock databases (no Redis/TimescaleDB required)
USE_MOCK_DB=false

# ===========================================
# Authentication
# ===========================================
# Enable API key authentication
AUTH_ENABLED=false

# API keys in format "key1:pub1,key2:pub2"
API_KEYS=

# ===========================================
# Rate Limiting
# ===========================================
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Requests per second limit
RATE_LIMIT_RPS=1000

# Burst size for rate limiting
RATE_LIMIT_BURST=100

# ===========================================
# CORS Configuration
# ===========================================
# CORS is enabled by default for Prebid.js integration
# Set to "false" to disable
CORS_ENABLED=true

# Allowed origins (comma-separated, empty = allow all)
# Example: https://publisher1.com,https://publisher2.com
CORS_ALLOWED_ORIGINS=

# Allow credentials (cookies, authorization headers)
CORS_ALLOW_CREDENTIALS=false

# ===========================================
# Security Headers
# ===========================================
# Enable security headers (default: true)
SECURITY_HEADERS_ENABLED=true

# X-Frame-Options: DENY, SAMEORIGIN, or ALLOW-FROM uri
SECURITY_X_FRAME_OPTIONS=DENY

# Content-Security-Policy for API responses
SECURITY_CSP=default-src 'none'; frame-ancestors 'none'

# Referrer-Policy header value
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin

# HSTS - only set when deploying behind TLS/HTTPS
# Example: max-age=31536000; includeSubDomains
SECURITY_HSTS=

# Permissions-Policy to disable browser features
SECURITY_PERMISSIONS_POLICY=geolocation=(), microphone=(), camera=()

# Cache-Control for API responses
SECURITY_CACHE_CONTROL=no-store, no-cache, must-revalidate, private

# ===========================================
# Request Limits
# ===========================================
# Maximum request body size in bytes (default: 1MB)
MAX_REQUEST_SIZE=1048576

# Maximum URL length in bytes (default: 8KB)
MAX_URL_LENGTH=8192

# ===========================================
# Logging
# ===========================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, console
LOG_FORMAT=json

# ===========================================
# Development Options
# ===========================================
# Enable debug logging
DEBUG=false

# Flask debug mode (development only)
FLASK_DEBUG=false
